@implements IDisposable

@inject NavigationManager NavigationManager

<input type="checkbox" title="Navigation menu" class="navbar-toggler" />

<div class="nav-scrollable" onclick="document.querySelector('.navbar-toggler').click()">
	<nav class="flex-column">

		<div class="nav-item px-3">
			<NavLink class="nav-link" href="categorias">
				<span class="bi bi-list-nested-nav-menu" aria-hidden="true"></span> Categorias
			</NavLink>
		</div>
		<div class="nav-item px-3">
			<NavLink class="nav-link" href="produtos">
				<span class="bi bi-list-nested-nav-menu" aria-hidden="true"></span> Produtos
			</NavLink>
		</div>
		<div class="nav-item px-3">
			<NavLink class="nav-link" href="modosentrega">
				<span class="bi bi-list-nested-nav-menu" aria-hidden="true"></span> Modo de Entrega
			</NavLink>
		</div>

		<AuthorizeView Roles="Admin">
			<Authorized>
				<div class="nav-item px-3">
					<NavLink class="nav-link" href="admin/users">
						<span class="bi bi-person-nav-menu" aria-hidden="true"></span> Gestão de Utilizadores
					</NavLink>
				</div>
				<div class="nav-item px-3">
					<NavLink class="nav-link" href="admin/roles">
						<span class="bi bi-person-fill-nav-menu" aria-hidden="true"></span> Gestão de Roles
					</NavLink>
				</div>
			</Authorized>
		</AuthorizeView>
	</nav>

</div>

@code {
	private string? currentUrl;

	protected override void OnInitialized()
	{
		currentUrl = NavigationManager.ToBaseRelativePath(NavigationManager.Uri);
		NavigationManager.LocationChanged += OnLocationChanged;
	}

	private void OnLocationChanged(object? sender, LocationChangedEventArgs e)
	{
		currentUrl = NavigationManager.ToBaseRelativePath(e.Location);
		StateHasChanged();
	}

	public void Dispose()
	{
		NavigationManager.LocationChanged -= OnLocationChanged;
	}
}

